{"version":3,"sources":["webpack:///./node_modules/echarts/lib/coord/geo/Geo.js","webpack:///./node_modules/echarts/lib/component/helper/roamHelper.js","webpack:///./node_modules/echarts/lib/component/helper/MapDraw.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/textCoord.js","webpack:///./src/views/WorldMap.vue?0291","webpack:///./node_modules/echarts/lib/visual/visualSolution.js","webpack:///./src/views/WorldMap.vue?3a84","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/nanhai.js","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack:///./node_modules/echarts/lib/action/geoRoam.js","webpack:///./node_modules/echarts/lib/component/helper/RoamController.js","webpack:///./node_modules/echarts/lib/coord/geo/geoJSONLoader.js","webpack:///./node_modules/echarts/lib/chart/map/MapSeries.js","webpack:///./src/views/WorldMap.vue?19d5","webpack:///src/views/WorldMap.vue","webpack:///./src/views/WorldMap.vue?a285","webpack:///./src/views/WorldMap.vue","webpack:///./node_modules/echarts/lib/chart/map/mapVisual.js","webpack:///./node_modules/echarts/lib/coord/geo/geoSourceManager.js","webpack:///./node_modules/echarts/lib/visual/VisualMapping.js","webpack:///./node_modules/echarts/lib/visual/visualDefault.js","webpack:///./node_modules/echarts/lib/chart/map.js","webpack:///./src/views/WorldMap.vue?65f5","webpack:///./node_modules/echarts/lib/coord/geo/fix/geoCoord.js","webpack:///./node_modules/echarts/lib/coord/View.js","webpack:///./node_modules/echarts/lib/component/helper/selectableMixin.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack:///./node_modules/echarts/lib/component/visualMapContinuous.js","webpack:///./node_modules/echarts/lib/action/createDataSelectAction.js","webpack:///./node_modules/echarts/lib/chart/map/backwardCompat.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/chart/map/MapView.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/diaoyuIsland.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack:///./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack:///./node_modules/echarts/lib/component/visualMap/typeDefaulter.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/coord/geo/geoSVGLoader.js","webpack:///./node_modules/echarts/lib/component/visualMap/helper.js","webpack:///./node_modules/echarts/lib/chart/map/mapSymbolLayout.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack:///./node_modules/echarts/lib/action/roamHelper.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack:///./node_modules/echarts/lib/coord/geo/geoCreator.js","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js","webpack:///./node_modules/echarts/lib/chart/map/mapDataStatistic.js"],"names":["zrUtil","BoundingRect","View","geoSourceManager","Geo","name","map","nameMap","invertLongitute","call","this","source","load","_nameCoordMap","nameCoordMap","_regionsMap","regionsMap","_invertLongitute","regions","_rect","boundingRect","doConvert","methodName","ecModel","finder","value","geoModel","seriesModel","coordSys","coordinateSystem","getReferringComponents","prototype","constructor","type","dimensions","containCoord","coord","i","length","contain","transformTo","x","y","width","height","rect","getBoundingRect","clone","rawTransformable","_rawTransformable","transform","calculateTransform","decomposeTransform","scale","updateTransform","_updateTransform","getRegion","get","getRegionByCoord","addGeoCoord","geoCoord","set","getGeoCoord","dataToPoint","data","noRoam","out","convertToPixel","curry","convertFromPixel","mixin","_default","module","exports","updateViewOnPan","controllerHost","dx","dy","target","pos","position","dirty","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","newZoom","zoom","zoomMin","min","zoomMax","max","Infinity","Math","zoomScale","RoamController","roamHelper","_cursorHelper","onIrrelevantElement","graphic","_component","getUID","getFixedItemStyle","model","itemStyle","getItemStyle","areaColor","fill","updateMapSelectHandler","mapDraw","mapOrGeoModel","regionsGroup","api","fromView","off","on","_mouseDownFlag","e","el","__regions","parent","action","mainType","batch","region","from","uid","id","dispatchAction","updateMapSelected","eachChild","otherRegionEl","each","trigger","isSelected","MapDraw","updateGroup","group","Group","_controller","getZr","_controllerHost","_updateGroup","_mapName","_initialized","add","_regionsGroup","_backgroundGroup","draw","payload","isGeo","getData","eachComponent","subType","mapSeries","getHostGeoModel","geo","_updateBackground","_roamTransformable","slice","removeAll","itemStyleAccessPath","hoverItemStyleAccessPath","labelAccessPath","hoverLabelAccessPath","createHashMap","regionGroup","compoundPath","CompoundPath","segmentIgnoreThreshold","shape","paths","dataIdx","regionModel","getRegionModel","itemStyleModel","getModel","hoverItemStyleModel","hoverItemStyle","labelModel","hoverLabelModel","indexOfName","visualColor","getItemVisual","transformPoint","point","geometries","geometry","points","exterior","push","Polygon","interiors","interior","j","setStyle","style","strokeNoScale","culling","showLabel","hoverShowLabel","isDataNaN","isNaN","mapDimension","itemLayout","getItemLayout","labelFetcher","query","textEl","Text","center","z2","silent","setLabelStyle","hoverStyle","labelDataIndex","defaultText","useInsideStyle","textAlign","textVerticalAlign","setItemGraphicEl","eventData","componentType","componentIndex","geoIndex","option","groupRegions","highDownSilentOnTouch","setHoverStyle","_updateController","remove","dispose","removeGraphic","mapName","makeGraphic","root","controller","getZoom","enable","makeActionBase","extend","originX","originY","traverse","attr","setPointerChecker","getViewRectAfterRoam","coordsOffsetMap","mapType","coordFix","cp","content","locals","default","VisualMapping","hasKeys","obj","hasOwnProperty","createVisualMappings","stateList","supplementVisualOption","visualMappings","state","mappings","createMappings","visualData","visualType","isValidType","mappingOption","visual","__hidden","__alphaForOpacity","Creater","replaceVisualOption","thisOption","newOption","keys","has","key","applyVisual","getValueState","scope","dimension","dataIndex","visualTypesMap","getVisual","setVisual","setItemVisual","eachItem","valueOrIndex","index","rawDataItem","getRawDataItem","visualMap","valueState","visualTypes","len","prepareVisualTypes","incrementalApplyVisual","dim","progress","params","getDimension","next","VisualMapModel","numberUtil","DEFAULT_BAR_BOUND","ContinuousModel","defaultOption","align","calculable","range","realtime","itemHeight","itemWidth","hoverLink","hoverLinkDataSize","hoverLinkOnHandle","optionUpdated","isInit","superApply","arguments","resetExtent","resetVisual","mappingMethod","dataExtent","getExtent","_resetRange","resetItemSize","itemSize","_orient","reverse","auto","isArray","completeVisualOption","apply","symbolSize","setSelected","selected","getSelected","dataInterval","asc","findTargetDataIndices","result","eachTargetSeries","dataIndices","getDataDimension","seriesId","getVisualMeta","getColorVisual","oVals","getColorStopValues","iVals","stops","setStop","color","iIdx","oIdx","iLen","oLen","first","stopsLen","outerColors","visualMapModel","count","step","stopValues","Region","k","LinearGradient","eventTool","VisualMapView","sliderMove","helper","modelUtil","linearMap","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","init","_shapes","_dataInterval","_handleEnds","_useHandle","_hoverLinkDataIndices","_dragging","_hovering","doRender","_buildView","thisGroup","_resetInterval","_renderBar","dataRangeText","_renderEndsText","_updateView","renderBackground","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","positionGroup","endsIndex","text","textGap","barGroup","_applyTransform","orient","textStyleModel","textFont","getFont","textFill","getTextColor","targetGroup","shapes","useHandle","itemAlign","getItemAlign","_createBarGroup","outOfRange","createPolygon","inRange","getCursor","bind","_dragHandle","textRect","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","handleThumb","createHandlePoints","handleLabel","draggable","drift","onmousemove","stop","event","ondragend","handleLabelPoint","indicator","invisible","indicatorLabel","indicatorLabelPoint","isEnd","vertex","_updateInterval","visualMapId","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","opacity","setShape","barPoints","_updateHandle","forceState","opts","convertOpacityToAlpha","colorStops","_makeColorGradient","symbolSizes","getControllerVisual","_createBarPoints","handlesColor","sampleNumber","offset","currValue","inverse","rotation","PI","textPoint","applyTransform","getTransform","formatValueText","_showIndicator","cursorValue","textValue","rangeSymbol","halfHoverLinkSize","createIndicatorPoints","self","offsetX","offsetY","zr","_hoverLinkFromSeriesMouseOver","_hideIndicator","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","compressBatches","_dispatchHighDown","makeHighDownBatch","dataModel","getSeriesByIndex","seriesIndex","isTargetSeries","dataType","indices","element","global","cursor","isRange","extentMax","echarts","_roamHelper","updateCenterAndZoom","registerAction","update","componentModel","res","setCenter","setZoom","seriesGroup","Eventful","interactionMutex","pointerChecker","_zr","_opt","mousedownHandler","mousedown","mousemoveHandler","mousemove","mouseupHandler","mouseup","mousewheelHandler","mousewheel","pinchHandler","pinch","controlType","opt","disable","defaults","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","isDragging","isPinching","_pinching","isMiddleOrRightButtonOnMouseUpDown","_x","_y","isAvailableBehavior","gestureEvent","isTaken","oldX","oldY","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","abs","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","eventName","behaviorToCheck","contollerEvent","settings","setting","isString","_util","parseGeoJson","_model","makeInner","fixNanhai","fixTextCoord","fixGeoCoord","fixDiaoyuIsland","inner","mapRecord","parsed","specialAreas","geoJSON","Error","message","regionName","specialArea","left","top","regionRect","union","createListSimply","SeriesModel","_format","encodeHTML","addCommas","dataSelectableMixin","_dataProvider","retrieveRawAttr","MapSeries","dependencies","layoutMode","needsDrawMap","getInitialData","valueDim","dataNameMap","selectTargetList","toAppendNames","getName","geoSource","getMapType","updateSelectedMap","appendValues","dependentModels","getRawValue","getItemModel","formatTooltip","formattedValue","seriesNames","otherIndex","originalData","join","getTooltipPosition","zlevel","z","aspectScale","showLegendSymbol","dataRangeHoverLink","boundingCoords","scaleLimit","label","show","borderWidth","borderColor","emphasis","render","_vm","_h","$createElement","_c","_self","staticClass","class","unfold","staticStyle","attrs","selectUnfold","querySearch","handleSelect","callback","$$v","expression","ref","nameList","handleCurrentChange","elDrawer","$event","_v","_s","currentRow","currentData","filter","d","totalCites","_e","currentTableData","staticRenderFns","components","CopyRight","created","$store","dispatch","localStorage","getItem","window","addEventListener","setItem","JSON","stringify","updated","$refs","listTable","setCurrentRow","methods","val","dataList","drawRadar","results","queryString","cb","chart","showLoading","hideLoading","setOption","tooltip","series","computed","reduce","maxminData","accumulator","maxData","minData","component","eachSeriesByType","colorList","_config","__DEV__","mapDataStorage","geoJSONLoader","geoSVGLoader","loaders","svg","mapRecords","retrieveMap","record","singleSource","cloneShallow","makeInvoker","hostKey","method","zrColor","_number","isObject","CATEGORY_DEFAULT_VISUAL_INDEX","_normalizeData","normalizers","visualHandler","visualHandlers","getColorMapper","_doMap","normalizeVisualRange","preprocessForPiecewise","categories","preprocessForSpecifiedCategory","assert","mapValueToVisual","normalized","getNormalizer","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","fastLerp","parsedVisual","linear","category","piecewise","getSpecifiedVisual","fixed","doMapFixed","colorHue","makePartialColorVisualHandler","modifyHSL","colorSaturation","colorLightness","colorAlpha","modifyAlpha","makeDoMap","liftZ","symbol","getter","setter","symbolCfg","doMapToArray","pieceList","hasSpecialVisual","piece","originIndex","categoryMap","cate","visualArr","v","setVisualToOption","pop","isCategory","doNotNeedPair","applyValue","round","loop","sourceExtent","pieceIndex","findPieceIndex","item","parse","noop","littleThan","close","a","b","listVisualTypes","handler","addVisualHandler","eachVisual","context","mapVisual","isPrimary","newVisual","newVal","retrieveVisuals","hasVisual","ret","h","types","sort","type1","type2","indexOf","dependsOn","visualType1","visualType2","findClosestWhenOutside","possibleI","pieceValue","updatePossible","interval","newAbs","visualDefault","active","inactive","mapSymbolLayout","mapDataStatistic","backwardCompat","createDataSelectAction","registerLayout","registerVisual","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","registerPreprocessor","geoCoordMap","vector","matrix","Transformable","v2ApplyTransform","TransformDummy","_center","_zoom","setBoundingRect","setViewRect","_viewRect","rawTransform","centerCoord","_updateCenterAndZoom","getDefaultCenter","rawRect","cx","cy","getCenter","getRoamTransform","getLocalTransform","rawTransformMatrix","roamTransform","defaultCenter","origin","roamTransformable","copy","create","_rawTransform","invTransform","invert","getViewRect","pointToData","containPoint","targetList","_targetList","_selectTargetMap","targetMap","select","selectedMode","unSelect","toggleSelected","formatUtil","layout","extendComponentView","autoPositionValues","right","bottom","padding","normalizeCssArray","Rect","stroke","lineWidth","targetValue","visualCluster","visualObj","defaultColor","controllerVisuals","visualMapping","positionElement","getBoxLayoutParams","getWidth","getHeight","preprocessor","seriesType","actionInfos","actionInfo","idx","seriesOpt","mapLocation","ATTR","take","resourceKey","userKey","store","getStore","release","uKey","HIGH_DOWN_PROP","RECORD_VERSION_PROP","extendChartView","mapModel","_mapDraw","getComponent","_renderSymbols","originalDataIndex","circle","Circle","r","Z2_EMPHASIS_LIFT","fullData","mainSeries","fullIndex","itemModel","getItemGraphicEl","normalText","retrieve2","getFormattedLabel","emphasisText","highDownRecord","recordVersion","random","onEmphasis","onRegionHighDown","onNormal","enterRegionHighDown","toHighOrDown","extendFrom","setTextStyle","isRectText","__mapOriginalZ2","textPosition","getShallow","visualSolution","VISUAL_PRIORITY","VISUAL","COMPONENT","targetVisuals","resultVisual","mapping","createOnAllSeries","reset","resetDefines","pipelineContext","large","visualMetaList","visualMeta","concreteDim","dimInfo","getDimensionInfo","pieces","splitList","start","end","Component","registerSubTypeDefaulter","splitNumber","IRRELEVANT_EXCLUDES","targetCoordSysModel","getComponentByElement","topTarget","_parseSVG","parseSVG","makeViewBoxTransform","originRoot","buildGraphic","field","rootMap","originRootHostKey","removeKey","svgXML","ignoreViewBox","ignoreRootClip","svgWidth","svgHeight","viewBoxRect","viewBoxTransform","elRoot","setClipPath","plain","_layout","getLayoutRect","modelOption","ecSize","realIndex","paramsSet","reals","fakeValue","layoutInput","rParam","margin","batchItem","dataIndexInside","highlightKey","processedMapType","mapSymbolOffsets","subMapSeries","setItemLayout","view","previousZoom","fixX","fixY","createDimensions","List","coordDimensions","getSource","dimensionsInfo","list","initData","env","extendComponentModel","replacableOptionKeys","dataBound","ignoreSize","backgroundColor","contentColor","inactiveColor","precision","formatter","textStyle","parentModel","_dataExtent","mergeDefaultAndTheme","canvasSupported","getTargetSeriesIndices","optionSeriesIndex","seriesIndices","eachSeries","normalizeToArray","is","edgeSymbols","isMinMax","toFixed","replace","isFunction","extent","optDim","listDimensions","dimNames","dimName","isCalculationCoord","base","merge","completeSingle","defa","completeInactive","stateExist","stateAbsent","optExist","optAbsent","completeController","symbolExists","symbolSizeExists","visuals","parseFloat","resizeGeo","leftTop","rightBottom","boxLayoutOption","size","viewWidth","viewHeight","aspect","useCenterAndSize","parsePercent","viewRect","setGeoCoords","geoCreator","geoList","resize","mapModelGroupBySeries","nameMapList","singleMapSeries","mergeAll","retrieve","getFilledRegions","originRegionArr","regionsArr","registerCoordinateSystem","minSpan","maxSpan","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","sign","currDistSign","span","dist","dataStatistics","datas","statisticType","mapKey","sum","NaN","seriesGroups","hostGeoModel","seriesList","setData"],"mappings":"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","file":"js/chunk-f27bfe58.fe2e8224.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar View = require(\"../View\");\n\nvar geoSourceManager = require(\"./geoSourceManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Geo description]\n * For backward compatibility, the orginal interface:\n * `name, map, geoJson, specialAreas, nameMap` is kept.\n *\n * @param {string|Object} name\n * @param {string} map Map type\n *        Specify the positioned areas by left, top, width, height\n * @param {Object.<string, string>} [nameMap]\n *        Specify name alias\n * @param {boolean} [invertLongitute=true]\n */\nfunction Geo(name, map, nameMap, invertLongitute) {\n  View.call(this, name);\n  /**\n   * Map type\n   * @type {string}\n   */\n\n  this.map = map;\n  var source = geoSourceManager.load(map, nameMap);\n  this._nameCoordMap = source.nameCoordMap;\n  this._regionsMap = source.regionsMap;\n  this._invertLongitute = invertLongitute == null ? true : invertLongitute;\n  /**\n   * @readOnly\n   */\n\n  this.regions = source.regions;\n  /**\n   * @type {module:zrender/src/core/BoundingRect}\n   */\n\n  this._rect = source.boundingRect;\n}\n\nGeo.prototype = {\n  constructor: Geo,\n  type: 'geo',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['lng', 'lat'],\n\n  /**\n   * If contain given lng,lat coord\n   * @param {Array.<number>}\n   * @readOnly\n   */\n  containCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n\n    if (invertLongitute) {\n      // Longitute is inverted\n      rect.y = -rect.y - rect.height;\n    }\n\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransformable.decomposeTransform();\n\n    if (invertLongitute) {\n      var scale = rawTransformable.scale;\n      scale[1] = -scale[1];\n    }\n\n    rawTransformable.updateTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/coord/geo/Region}\n   */\n  getRegion: function (name) {\n    return this._regionsMap.get(name);\n  },\n  getRegionByCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return regions[i];\n      }\n    }\n  },\n\n  /**\n   * Add geoCoord for indexing by name\n   * @param {string} name\n   * @param {Array.<number>} geoCoord\n   */\n  addGeoCoord: function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  },\n\n  /**\n   * Get geoCoord by name\n   * @param {string} name\n   * @return {Array.<number>}\n   */\n  getGeoCoord: function (name) {\n    return this._nameCoordMap.get(name);\n  },\n\n  /**\n   * @override\n   */\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {string|Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    if (typeof data === 'string') {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      return View.prototype.dataToPoint.call(this, data, noRoam, out);\n    }\n  },\n\n  /**\n   * @override\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @override\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData')\n};\nzrUtil.mixin(Geo, View);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map.\n  || (seriesModel.getReferringComponents('geo')[0] || {}).coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = Geo;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n */\nfunction updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  var pos = target.position;\n  pos[0] += dx;\n  pos[1] += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n * @param {number} controllerHost.zoom\n * @param {number} controllerHost.zoomLimit like: {min: 1, max: 2}\n */\n\n\nfunction updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var pos = target.position;\n  var scale = target.scale;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  pos[0] -= (zoomX - pos[0]) * (zoomScale - 1);\n  pos[1] -= (zoomY - pos[1]) * (zoomScale - 1);\n  scale[0] *= zoomScale;\n  scale[1] *= zoomScale;\n  target.dirty();\n}\n\nexports.updateViewOnPan = updateViewOnPan;\nexports.updateViewOnZoom = updateViewOnZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar RoamController = require(\"./RoamController\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar geoSourceManager = require(\"../../coord/geo/geoSourceManager\");\n\nvar _component = require(\"../../util/component\");\n\nvar getUID = _component.getUID;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n}\n\nfunction updateMapSelectHandler(mapDraw, mapOrGeoModel, regionsGroup, api, fromView) {\n  regionsGroup.off('click');\n  regionsGroup.off('mousedown');\n\n  if (mapOrGeoModel.get('selectedMode')) {\n    regionsGroup.on('mousedown', function () {\n      mapDraw._mouseDownFlag = true;\n    });\n    regionsGroup.on('click', function (e) {\n      if (!mapDraw._mouseDownFlag) {\n        return;\n      }\n\n      mapDraw._mouseDownFlag = false;\n      var el = e.target;\n\n      while (!el.__regions) {\n        el = el.parent;\n      }\n\n      if (!el) {\n        return;\n      }\n\n      var action = {\n        type: (mapOrGeoModel.mainType === 'geo' ? 'geo' : 'map') + 'ToggleSelect',\n        batch: zrUtil.map(el.__regions, function (region) {\n          return {\n            name: region.name,\n            from: fromView.uid\n          };\n        })\n      };\n      action[mapOrGeoModel.mainType + 'Id'] = mapOrGeoModel.id;\n      api.dispatchAction(action);\n      updateMapSelected(mapOrGeoModel, regionsGroup);\n    });\n  }\n}\n\nfunction updateMapSelected(mapOrGeoModel, regionsGroup) {\n  // FIXME\n  regionsGroup.eachChild(function (otherRegionEl) {\n    zrUtil.each(otherRegionEl.__regions, function (region) {\n      otherRegionEl.trigger(mapOrGeoModel.isSelected(region.name) ? 'emphasis' : 'normal');\n    });\n  });\n}\n/**\n * @alias module:echarts/component/helper/MapDraw\n * @param {module:echarts/ExtensionAPI} api\n * @param {boolean} updateGroup\n */\n\n\nfunction MapDraw(api, updateGroup) {\n  var group = new graphic.Group();\n  /**\n   * @type {string}\n   * @private\n   */\n\n  this.uid = getUID('ec_map_draw');\n  /**\n   * @type {module:echarts/component/helper/RoamController}\n   * @private\n   */\n\n  this._controller = new RoamController(api.getZr());\n  /**\n   * @type {Object} {target, zoom, zoomLimit}\n   * @private\n   */\n\n  this._controllerHost = {\n    target: updateGroup ? group : null\n  };\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = group;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._updateGroup = updateGroup;\n  /**\n   * This flag is used to make sure that only one among\n   * `pan`, `zoom`, `click` can occurs, otherwise 'selected'\n   * action may be triggered when `pan`, which is unexpected.\n   * @type {booelan}\n   */\n\n  this._mouseDownFlag;\n  /**\n   * @type {string}\n   */\n\n  this._mapName;\n  /**\n   * @type {boolean}\n   */\n\n  this._initialized;\n  /**\n   * @type {module:zrender/container/Group}\n   */\n\n  group.add(this._regionsGroup = new graphic.Group());\n  /**\n   * @type {module:zrender/container/Group}\n   */\n\n  group.add(this._backgroundGroup = new graphic.Group());\n}\n\nMapDraw.prototype = {\n  constructor: MapDraw,\n  draw: function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n\n    this._updateBackground(geo);\n\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n\n    if (geo._roamTransformable.transform) {\n      group.transform = geo._roamTransformable.transform.slice();\n      group.decomposeTransform();\n    }\n\n    var scale = geo._rawTransformable.scale;\n    var position = geo._rawTransformable.position;\n    regionsGroup.removeAll();\n    var itemStyleAccessPath = ['itemStyle'];\n    var hoverItemStyleAccessPath = ['emphasis', 'itemStyle'];\n    var labelAccessPath = ['label'];\n    var hoverLabelAccessPath = ['emphasis', 'label'];\n    var nameMap = zrUtil.createHashMap();\n    zrUtil.each(geo.regions, function (region) {\n      // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n      var regionGroup = nameMap.get(region.name) || nameMap.set(region.name, new graphic.Group());\n      var compoundPath = new graphic.CompoundPath({\n        segmentIgnoreThreshold: 1,\n        shape: {\n          paths: []\n        }\n      });\n      regionGroup.add(compoundPath);\n      var regionModel = mapOrGeoModel.getRegionModel(region.name) || mapOrGeoModel;\n      var itemStyleModel = regionModel.getModel(itemStyleAccessPath);\n      var hoverItemStyleModel = regionModel.getModel(hoverItemStyleAccessPath);\n      var itemStyle = getFixedItemStyle(itemStyleModel);\n      var hoverItemStyle = getFixedItemStyle(hoverItemStyleModel);\n      var labelModel = regionModel.getModel(labelAccessPath);\n      var hoverLabelModel = regionModel.getModel(hoverLabelAccessPath);\n      var dataIdx; // Use the itemStyle in data if has data\n\n      if (data) {\n        dataIdx = data.indexOfName(region.name); // Only visual color of each item will be used. It can be encoded by dataRange\n        // But visual color of series is used in symbol drawing\n        //\n        // Visual color for each series is for the symbol draw\n\n        var visualColor = data.getItemVisual(dataIdx, 'color', true);\n\n        if (visualColor) {\n          itemStyle.fill = visualColor;\n        }\n      }\n\n      var transformPoint = function (point) {\n        return [point[0] * scale[0] + position[0], point[1] * scale[1] + position[1]];\n      };\n\n      zrUtil.each(region.geometries, function (geometry) {\n        if (geometry.type !== 'polygon') {\n          return;\n        }\n\n        var points = [];\n\n        for (var i = 0; i < geometry.exterior.length; ++i) {\n          points.push(transformPoint(geometry.exterior[i]));\n        }\n\n        compoundPath.shape.paths.push(new graphic.Polygon({\n          segmentIgnoreThreshold: 1,\n          shape: {\n            points: points\n          }\n        }));\n\n        for (var i = 0; i < (geometry.interiors ? geometry.interiors.length : 0); ++i) {\n          var interior = geometry.interiors[i];\n          var points = [];\n\n          for (var j = 0; j < interior.length; ++j) {\n            points.push(transformPoint(interior[j]));\n          }\n\n          compoundPath.shape.paths.push(new graphic.Polygon({\n            segmentIgnoreThreshold: 1,\n            shape: {\n              points: points\n            }\n          }));\n        }\n      });\n      compoundPath.setStyle(itemStyle);\n      compoundPath.style.strokeNoScale = true;\n      compoundPath.culling = true; // Label\n\n      var showLabel = labelModel.get('show');\n      var hoverShowLabel = hoverLabelModel.get('show');\n      var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n      var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n      // 1. In map series and data value is NaN\n      // 2. In geo component\n      // 4. Region has no series legendSymbol, which will be add a showLabel flag in mapSymbolLayout\n\n      if (isGeo || isDataNaN && (showLabel || hoverShowLabel) || itemLayout && itemLayout.showLabel) {\n        var query = !isGeo ? dataIdx : region.name;\n        var labelFetcher; // Consider dataIdx not found.\n\n        if (!data || dataIdx >= 0) {\n          labelFetcher = mapOrGeoModel;\n        }\n\n        var textEl = new graphic.Text({\n          position: transformPoint(region.center.slice()),\n          // FIXME\n          // label rotation is not support yet in geo or regions of series-map\n          // that has no data. The rotation will be effected by this `scale`.\n          // So needed to change to RectText?\n          scale: [1 / group.scale[0], 1 / group.scale[1]],\n          z2: 10,\n          silent: true\n        });\n        graphic.setLabelStyle(textEl.style, textEl.hoverStyle = {}, labelModel, hoverLabelModel, {\n          labelFetcher: labelFetcher,\n          labelDataIndex: query,\n          defaultText: region.name,\n          useInsideStyle: false\n        }, {\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        });\n        regionGroup.add(textEl);\n      } // setItemGraphicEl, setHoverStyle after all polygons and labels\n      // are added to the rigionGroup\n\n\n      if (data) {\n        data.setItemGraphicEl(dataIdx, regionGroup);\n      } else {\n        var regionModel = mapOrGeoModel.getRegionModel(region.name); // Package custom mouse event for geo component\n\n        compoundPath.eventData = {\n          componentType: 'geo',\n          componentIndex: mapOrGeoModel.componentIndex,\n          geoIndex: mapOrGeoModel.componentIndex,\n          name: region.name,\n          region: regionModel && regionModel.option || {}\n        };\n      }\n\n      var groupRegions = regionGroup.__regions || (regionGroup.__regions = []);\n      groupRegions.push(region);\n      regionGroup.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode');\n      graphic.setHoverStyle(regionGroup, hoverItemStyle);\n      regionsGroup.add(regionGroup);\n    });\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    updateMapSelectHandler(this, mapOrGeoModel, regionsGroup, api, fromView);\n    updateMapSelected(mapOrGeoModel, regionsGroup);\n  },\n  remove: function () {\n    this._regionsGroup.removeAll();\n\n    this._backgroundGroup.removeAll();\n\n    this._controller.dispose();\n\n    this._mapName && geoSourceManager.removeGraphic(this._mapName, this.uid);\n    this._mapName = null;\n    this._controllerHost = {};\n  },\n  _updateBackground: function (geo) {\n    var mapName = geo.map;\n\n    if (this._mapName !== mapName) {\n      zrUtil.each(geoSourceManager.makeGraphic(mapName, this.uid), function (root) {\n        this._backgroundGroup.add(root);\n      }, this);\n    }\n\n    this._mapName = mapName;\n  },\n  _updateController: function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      }));\n\n      if (this._updateGroup) {\n        var scale = this.group.scale;\n\n        this._regionsGroup.traverse(function (el) {\n          if (el.type === 'text') {\n            el.attr('scale', [1 / scale[0], 1 / scale[1]]);\n          }\n        });\n      }\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.getViewRectAfterRoam().contain(x, y) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  }\n};\nvar _default = MapDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar coordsOffsetMap = {\n  '南海诸岛': [32, 80],\n  // 全国\n  '广东': [0, -10],\n  '香港': [10, 5],\n  '澳门': [-10, 10],\n  //'北京': [-10, 0],\n  '天津': [5, 5]\n};\n\nfunction _default(mapType, region) {\n  if (mapType === 'china') {\n    var coordFix = coordsOffsetMap[region.name];\n\n    if (coordFix) {\n      var cp = region.center;\n      cp[0] += coordFix[0] / 10.5;\n      cp[1] += -coordFix[1] / (10.5 / 0.75);\n    }\n  }\n}\n\nmodule.exports = _default;","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=style&index=0&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"d337f572\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapping = require(\"./VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name in obj) {\n      if (obj.hasOwnProperty(name)) {\n        return true;\n      }\n    }\n  }\n}\n/**\n * @param {Object} option\n * @param {Array.<string>} stateList\n * @param {Function} [supplementVisualOption]\n * @return {Object} visualMappings <state, <visualType, module:echarts/visual/VisualMapping>>\n */\n\n\nfunction createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function () {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\n/**\n * @param {Object} thisOption\n * @param {Object} newOption\n * @param {Array.<string>} keys\n */\n\n\nfunction replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {module:echarts/data/List} list\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {object} [scope] Scope for getValueState\n * @param {string} [dimension] Concrete dimension, if used.\n */\n// ???! handle brush?\n\n\nfunction applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return data.getItemVisual(dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    data.setItemVisual(dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {number} [dim] dimension or dimension index.\n */\n\n\nfunction incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n\n  function progress(params, data) {\n    if (dim != null) {\n      dim = data.getDimension(dim);\n    }\n\n    function getVisual(key) {\n      return data.getItemVisual(dataIndex, key);\n    }\n\n    function setVisual(key, value) {\n      data.setItemVisual(dataIndex, key, value);\n    }\n\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n      if (rawDataItem && rawDataItem.visualMap === false) {\n        continue;\n      }\n\n      var value = dim != null ? data.get(dim, dataIndex, true) : dataIndex;\n      var valueState = getValueState(value);\n      var mappings = visualMappings[valueState];\n      var visualTypes = visualTypesMap[valueState];\n\n      for (var i = 0, len = visualTypes.length; i < len; i++) {\n        var type = visualTypes[i];\n        mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n      }\n    }\n  }\n\n  return {\n    progress: progress\n  };\n}\n\nexports.createVisualMappings = createVisualMappings;\nexports.replaceVisualOption = replaceVisualOption;\nexports.applyVisual = applyVisual;\nexports.incrementalApplyVisual = incrementalApplyVisual;","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=style&index=0&lang=less&\"","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = VisualMapModel.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    align: 'auto',\n    // 'auto', 'left', 'right', 'top', 'bottom'\n    calculable: false,\n    // This prop effect default component type determine,\n    // See echarts/component/visualMap/typeDefaulter.\n    range: null,\n    // selected range. In default case `range` is [min, max]\n    // and can auto change along with modification of min max,\n    // util use specifid a range.\n    realtime: true,\n    // Whether realtime update.\n    itemHeight: null,\n    // The length of the range control edge.\n    itemWidth: null,\n    // The length of the other side.\n    hoverLink: true,\n    // Enable hover highlight.\n    hoverLinkDataSize: null,\n    // The size of hovered data.\n    hoverLinkOnHandle: null // Whether trigger hoverLink when hover handle.\n    // If not specified, follow the value of `realtime`.\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    ContinuousModel.superApply(this, 'optionUpdated', arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  resetItemSize: function () {\n    ContinuousModel.superApply(this, 'resetItemSize', arguments);\n    var itemSize = this.itemSize;\n    this._orient === 'horizontal' && itemSize.reverse();\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  },\n\n  /**\n   * @private\n   */\n  _resetRange: function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = 0; // For good looking.\n      }\n    }, this);\n  },\n\n  /**\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  },\n\n  /**\n   * @public\n   */\n  getSelected: function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  },\n\n  /**\n   * @override\n   */\n  getValueState: function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  },\n\n  /**\n   * @params {Array.<number>} range target value: range[0] <= value && value <= range[1]\n   * @return {Array.<Object>} [{seriesId, dataIndices: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @implement\n   */\n  getVisualMeta: function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  }\n});\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nvar _default = ContinuousModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Region = require(\"../Region\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for 南海诸岛\nvar geoCoord = [126, 25];\nvar points = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];\n\nfor (var i = 0; i < points.length; i++) {\n  for (var k = 0; k < points[i].length; k++) {\n    points[i][k][0] /= 10.5;\n    points[i][k][1] /= -10.5 / 0.75;\n    points[i][k][0] += geoCoord[0];\n    points[i][k][1] += geoCoord[1];\n  }\n}\n\nfunction _default(mapType, regions) {\n  if (mapType === 'china') {\n    regions.push(new Region('南海诸岛', zrUtil.map(points, function (exterior) {\n      return {\n        type: 'polygon',\n        exterior: exterior\n      };\n    }), geoCoord));\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar helper = require(\"./helper\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView = VisualMapView.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @override\n   */\n  init: function () {\n    ContinuousView.superApply(this, 'init', arguments);\n    /**\n     * @private\n     */\n\n    this._shapes = {};\n    /**\n     * @private\n     */\n\n    this._dataInterval = [];\n    /**\n     * @private\n     */\n\n    this._handleEnds = [];\n    /**\n     * @private\n     */\n\n    this._orient;\n    /**\n     * @private\n     */\n\n    this._useHandle;\n    /**\n     * @private\n     */\n\n    this._hoverLinkDataIndices = [];\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._hovering;\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _buildView: function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.barGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: {\n        x: position[0],\n        y: position[1],\n        textVerticalAlign: orient === 'horizontal' ? 'middle' : align,\n        textAlign: orient === 'horizontal' ? align : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _renderBar: function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var barGroup = shapes.barGroup = this._createBarGroup(itemAlign); // Bar\n\n\n    barGroup.add(shapes.outOfRange = createPolygon());\n    barGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    var textRect = visualMapModel.textStyleModel.getTextRect('国');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(barGroup, 0, itemSize, textSize, orient, itemAlign);\n\n      this._createHandle(barGroup, 1, itemSize, textSize, orient, itemAlign);\n    }\n\n    this._createIndicator(barGroup, itemSize, textSize, orient);\n\n    targetGroup.add(barGroup);\n  },\n\n  /**\n   * @private\n   */\n  _createHandle: function (barGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleThumb = createPolygon(createHandlePoints(handleIndex, textSize), getCursor(this._orient), onDrift, onDragEnd);\n    handleThumb.position[0] = itemSize[0];\n    barGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(handleLabel);\n    var handleLabelPoint = [orient === 'horizontal' ? textSize / 2 : textSize * 1.5, orient === 'horizontal' ? handleIndex === 0 ? -(textSize * 1.5) : textSize * 1.5 : handleIndex === 0 ? -textSize / 2 : textSize / 2];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  },\n\n  /**\n   * @private\n   */\n  _createIndicator: function (barGroup, itemSize, textSize, orient) {\n    var indicator = createPolygon([[0, 0]], 'move');\n    indicator.position[0] = itemSize[0];\n    indicator.attr({\n      invisible: true,\n      silent: true\n    });\n    barGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT + 3, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n  },\n\n  /**\n   * @private\n   */\n  _dragHandle: function (handleIndex, isEnd, dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.barGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  _updateInterval: function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor,\n      opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor,\n      opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  },\n\n  /**\n   * @private\n   */\n  _createBarVisual: function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  },\n\n  /**\n   * @private\n   */\n  _makeColorGradient: function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  },\n\n  /**\n   * @private\n   */\n  _createBarPoints: function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  },\n\n  /**\n   * @private\n   */\n  _createBarGroup: function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scale: itemAlign === 'bottom' ? [1, 1] : [-1, 1],\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scale: itemAlign === 'bottom' ? [-1, 1] : [1, 1],\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scale: itemAlign === 'left' ? [1, -1] : [-1, -1]\n    } : {\n      scale: itemAlign === 'left' ? [1, 1] : [-1, 1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _updateHandle: function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.position[1] = handleEnds[handleIndex]; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        textVerticalAlign: 'middle',\n        textAlign: this._applyTransform(this._orient === 'horizontal' ? handleIndex === 0 ? 'bottom' : 'top' : 'left', shapes.barGroup)\n      });\n    }, this);\n  },\n\n  /**\n   * @private\n   * @param {number} cursorValue\n   * @param {number} textValue\n   * @param {string} [rangeSymbol]\n   * @param {number} [halfHoverLinkSize]\n   */\n  _showIndicator: function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var pos = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.position[1] = pos;\n    indicator.attr('invisible', false);\n    indicator.setShape('points', createIndicatorPoints(!!rangeSymbol, halfHoverLinkSize, pos, itemSize[1]));\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    indicator.setStyle('fill', color); // Update handle label position.\n\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.barGroup);\n\n    var orient = this._orient;\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      textVerticalAlign: orient === 'horizontal' ? align : 'middle',\n      textAlign: orient === 'horizontal' ? 'center' : align,\n      x: textPoint[0],\n      y: textPoint[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkToSeries: function () {\n    var self = this;\n\n    this._shapes.barGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.barGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkFromSeries: function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doHoverLinkToSeries: function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, '≈ ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  },\n\n  /**\n   * @private\n   */\n  _hoverLinkFromSeriesMouseOver: function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || el.dataIndex == null) {\n      return;\n    }\n\n    var dataModel = this.ecModel.getSeriesByIndex(el.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(el.dataType);\n    var value = data.get(visualMapModel.getDataDimension(data), el.dataIndex, true);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _hideIndicator: function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkToSeries: function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkFromSeries: function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  },\n\n  /**\n   * @private\n   */\n  _applyTransform: function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return graphic[zrUtil.isArray(vertex) ? 'applyTransform' : 'transformDirection'](vertex, transform, inverse);\n  },\n\n  /**\n   * @private\n   */\n  _dispatchHighDown: function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  }\n});\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction createHandlePoints(handleIndex, textSize) {\n  return handleIndex === 0 ? [[0, 0], [textSize, 0], [textSize, -textSize]] : [[0, 0], [textSize, 0], [textSize, textSize]];\n}\n\nfunction createIndicatorPoints(isRange, halfHoverLinkSize, pos, extentMax) {\n  return isRange ? [// indicate range\n  [0, -mathMin(halfHoverLinkSize, mathMax(pos, 0))], [HOVER_LINK_OUT, 0], [0, mathMin(halfHoverLinkSize, mathMax(extentMax - pos, 0))]] : [// indicate single value\n  [0, 0], [5, -5], [5, 5]];\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = ContinuousView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _roamHelper = require(\"./roamHelper\");\n\nvar updateCenterAndZoom = _roamHelper.updateCenterAndZoom;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @payload\n * @property {string} [componentType=series]\n * @property {number} [dx]\n * @property {number} [dy]\n * @property {number} [zoom]\n * @property {number} [originX]\n * @property {number} [originY]\n */\necharts.registerAction({\n  type: 'geoRoam',\n  event: 'geoRoam',\n  update: 'updateTransform'\n}, function (payload, ecModel) {\n  var componentType = payload.componentType || 'series';\n  ecModel.eachComponent({\n    mainType: componentType,\n    query: payload\n  }, function (componentModel) {\n    var geo = componentModel.coordinateSystem;\n\n    if (geo.type !== 'geo') {\n      return;\n    }\n\n    var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'));\n    componentModel.setCenter && componentModel.setCenter(res.center);\n    componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n    // So the center and zoom must be in sync. Include the series not selected by legend\n\n    if (componentType === 'series') {\n      zrUtil.each(componentModel.seriesGroup, function (seriesModel) {\n        seriesModel.setCenter(res.center);\n        seriesModel.setZoom(res.zoom);\n      });\n    }\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @alias module:echarts/component/helper/RoamController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\nfunction RoamController(zr) {\n  /**\n   * @type {Function}\n   */\n  this.pointerChecker;\n  /**\n   * @type {module:zrender}\n   */\n\n  this._zr = zr;\n  /**\n   * @type {Object}\n   */\n\n  this._opt = {}; // Avoid two roamController bind the same handler\n\n  var bind = zrUtil.bind;\n  var mousedownHandler = bind(mousedown, this);\n  var mousemoveHandler = bind(mousemove, this);\n  var mouseupHandler = bind(mouseup, this);\n  var mousewheelHandler = bind(mousewheel, this);\n  var pinchHandler = bind(pinch, this);\n  Eventful.call(this);\n  /**\n   * @param {Function} pointerChecker\n   *                   input: x, y\n   *                   output: boolean\n   */\n\n  this.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  /**\n   * Notice: only enable needed types. For example, if 'zoom'\n   * is not needed, 'zoom' should not be enabled, otherwise\n   * default mousewheel behaviour (scroll page) will be disabled.\n   *\n   * @param  {boolean|string} [controlType=true] Specify the control type,\n   *                          which can be null/undefined or true/false\n   *                          or 'pan/move' or 'zoom'/'scale'\n   * @param {Object} [opt]\n   * @param {Object} [opt.zoomOnMouseWheel=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseMove=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseWheel=false] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.preventDefaultMouseMove=true] When pan.\n   */\n\n\n  this.enable = function (controlType, opt) {\n    // Disable previous first\n    this.disable();\n    this._opt = zrUtil.defaults(zrUtil.clone(opt) || {}, {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      // By default, wheel do not trigger move.\n      moveOnMouseWheel: false,\n      preventDefaultMouseMove: true\n    });\n\n    if (controlType == null) {\n      controlType = true;\n    }\n\n    if (controlType === true || controlType === 'move' || controlType === 'pan') {\n      zr.on('mousedown', mousedownHandler);\n      zr.on('mousemove', mousemoveHandler);\n      zr.on('mouseup', mouseupHandler);\n    }\n\n    if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n      zr.on('mousewheel', mousewheelHandler);\n      zr.on('pinch', pinchHandler);\n    }\n  };\n\n  this.disable = function () {\n    zr.off('mousedown', mousedownHandler);\n    zr.off('mousemove', mousemoveHandler);\n    zr.off('mouseup', mouseupHandler);\n    zr.off('mousewheel', mousewheelHandler);\n    zr.off('pinch', pinchHandler);\n  };\n\n  this.dispose = this.disable;\n\n  this.isDragging = function () {\n    return this._dragging;\n  };\n\n  this.isPinching = function () {\n    return this._pinching;\n  };\n}\n\nzrUtil.mixin(RoamController, Eventful);\n\nfunction mousedown(e) {\n  if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY; // Only check on mosedown, but not mousemove.\n  // Mouse can be out of target when mouse moving.\n\n  if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n    this._x = x;\n    this._y = y;\n    this._dragging = true;\n  }\n}\n\nfunction mousemove(e) {\n  if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY;\n  var oldX = this._x;\n  var oldY = this._y;\n  var dx = x - oldX;\n  var dy = y - oldY;\n  this._x = x;\n  this._y = y;\n  this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n  trigger(this, 'pan', 'moveOnMouseMove', e, {\n    dx: dx,\n    dy: dy,\n    oldX: oldX,\n    oldY: oldY,\n    newX: x,\n    newY: y\n  });\n}\n\nfunction mouseup(e) {\n  if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n    this._dragging = false;\n  }\n}\n\nfunction mousewheel(e) {\n  var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n  var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n  var wheelDelta = e.wheelDelta;\n  var absWheelDeltaDelta = Math.abs(wheelDelta);\n  var originX = e.offsetX;\n  var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n  if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n    return;\n  } // If both `shouldZoom` and `shouldMove` is true, trigger\n  // their event both, and the final behavior is determined\n  // by event listener themselves.\n\n\n  if (shouldZoom) {\n    // Convenience:\n    // Mac and VM Windows on Mac: scroll up: zoom out.\n    // Windows: scroll up: zoom in.\n    // FIXME: Should do more test in different environment.\n    // wheelDelta is too complicated in difference nvironment\n    // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n    // although it has been normallized by zrender.\n    // wheelDelta of mouse wheel is bigger than touch pad.\n    var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n    var scale = wheelDelta > 0 ? factor : 1 / factor;\n    checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n      scale: scale,\n      originX: originX,\n      originY: originY\n    });\n  }\n\n  if (shouldMove) {\n    // FIXME: Should do more test in different environment.\n    var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n    var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n    checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n      scrollDelta: scrollDelta,\n      originX: originX,\n      originY: originY\n    });\n  }\n}\n\nfunction pinch(e) {\n  if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n  checkPointerAndTrigger(this, 'zoom', null, e, {\n    scale: scale,\n    originX: e.pinchX,\n    originY: e.pinchY\n  });\n}\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = zrUtil.bind(isAvailableBehavior, null, behaviorToCheck, e);\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!zrUtil.isString(setting) || e.event[setting + 'Key']);\n}\n\nvar _default = RoamController;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\n\nvar parseGeoJson = require(\"./parseGeoJson\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar fixNanhai = require(\"./fix/nanhai\");\n\nvar fixTextCoord = require(\"./fix/textCoord\");\n\nvar fixGeoCoord = require(\"./fix/geoCoord\");\n\nvar fixDiaoyuIsland = require(\"./fix/diaoyuIsland\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Built-in GEO fixer.\nvar inner = makeInner();\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} mapRecord {specialAreas, geoJSON}\n   * @return {Object} {regions, boundingRect}\n   */\n  load: function (mapName, mapRecord) {\n    var parsed = inner(mapRecord).parsed;\n\n    if (parsed) {\n      return parsed;\n    }\n\n    var specialAreas = mapRecord.specialAreas || {};\n    var geoJSON = mapRecord.geoJSON;\n    var regions; // https://jsperf.com/try-catch-performance-overhead\n\n    try {\n      regions = geoJSON ? parseGeoJson(geoJSON) : [];\n    } catch (e) {\n      throw new Error('Invalid geoJson format\\n' + e.message);\n    }\n\n    each(regions, function (region) {\n      var regionName = region.name;\n      fixTextCoord(mapName, region);\n      fixGeoCoord(mapName, region);\n      fixDiaoyuIsland(mapName, region); // Some area like Alaska in USA map needs to be tansformed\n      // to look better\n\n      var specialArea = specialAreas[regionName];\n\n      if (specialArea) {\n        region.transformTo(specialArea.left, specialArea.top, specialArea.width, specialArea.height);\n      }\n    });\n    fixNanhai(mapName, regions);\n    return inner(mapRecord).parsed = {\n      regions: regions,\n      boundingRect: getBoundingRect(regions)\n    };\n  }\n};\n\nfunction getBoundingRect(regions) {\n  var rect;\n\n  for (var i = 0; i < regions.length; i++) {\n    var regionRect = regions[i].getBoundingRect();\n    rect = rect || regionRect.clone();\n    rect.union(regionRect);\n  }\n\n  return rect;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\nvar geoSourceManager = require(\"../../coord/geo/geoSourceManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar MapSeries = SeriesModel.extend({\n  type: 'series.map',\n  dependencies: ['geo'],\n  layoutMode: 'box',\n\n  /**\n   * Only first map series of same mapType will drawMap\n   * @type {boolean}\n   */\n  needsDrawMap: false,\n\n  /**\n   * Group of all map series with same mapType\n   * @type {boolean}\n   */\n  seriesGroup: [],\n  getInitialData: function (option) {\n    var data = createListSimply(this, ['value']);\n    var valueDim = data.mapDimension('value');\n    var dataNameMap = zrUtil.createHashMap();\n    var selectTargetList = [];\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name = data.getName(i);\n      dataNameMap.set(name, true);\n      selectTargetList.push({\n        name: name,\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        selectTargetList.push({\n          name: name\n        });\n        toAppendNames.push(name);\n      }\n    });\n    this.updateSelectedMap(selectTargetList); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  },\n\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n  getHostGeoModel: function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.dependentModels.geo[geoIndex] : null;\n  },\n  getMapType: function () {\n    return (this.getHostGeoModel() || this).option.map;\n  },\n  // _fillOption: function (option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // },\n  getRawValue: function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  },\n\n  /**\n   * Get model of region\n   * @param  {string} name\n   * @return {module:echarts/model/Model}\n   */\n  getRegionModel: function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  },\n\n  /**\n   * Map tooltip formatter\n   *\n   * @param {number} dataIndex\n   */\n  formatTooltip: function (dataIndex) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var formattedValue = addCommas(this.getRawValue(dataIndex));\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(encodeHTML(seriesGroup[i].name));\n      }\n    }\n\n    return seriesNames.join(', ') + '<br />' + encodeHTML(name + ' : ' + formattedValue);\n  },\n\n  /**\n   * @implement\n   */\n  getTooltipPosition: function (dataIndex) {\n    if (dataIndex != null) {\n      var name = this.getData().getName(dataIndex);\n      var geo = this.coordinateSystem;\n      var region = geo.getRegion(name);\n      return region && geo.dataToPoint(region.center);\n    }\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    aspectScale: 0.75,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    // 数值合并方式，默认加和，可选为：\n    // 'sum' | 'average' | 'max' | 'min'\n    // mapValueCalculation: 'sum',\n    // 地图数值计算结果小数精度\n    // mapValuePrecision: 0,\n    // 显示图例颜色标识（系列标识的小圆点），图例开启时有效\n    showLegendSymbol: true,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    dataRangeHoverLink: true,\n    // 是否开启缩放及漫游模式\n    // roam: false,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    }\n  }\n});\nzrUtil.mixin(MapSeries, dataSelectableMixin);\nvar _default = MapSeries;\nmodule.exports = _default;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"module\"},[_c('el-button',{staticClass:\"hidden-lg-and-up\",class:[_vm.unfold?'unfold':'fold'],staticStyle:{\"padding\":\"10px 12px\",\"font-size\":\"20px\"},attrs:{\"type\":\"primary\",\"icon\":_vm.unfold?'el-icon-s-unfold':'el-icon-s-fold',\"plain\":\"\"},on:{\"click\":_vm.selectUnfold}}),_c('el-container',[_c('el-aside',{staticClass:\"hidden-md-and-down\"},[_c('el-autocomplete',{staticClass:\"inline-input\",attrs:{\"placeholder\":\"请输入名称\",\"prefix-icon\":\"el-icon-search\",\"fetch-suggestions\":_vm.querySearch},on:{\"select\":_vm.handleSelect},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-table',{ref:\"listTable\",attrs:{\"data\":_vm.nameList,\"highlight-current-row\":\"\",\"height\":\"calc(100vh - 60px)\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{attrs:{\"property\":\"value\",\"label\":\"高校名称\",\"align\":\"center\",\"sortable\":\"\"}})],1)],1),_c('el-drawer',{staticClass:\"hidden-lg-and-up\",attrs:{\"visible\":_vm.elDrawer,\"direction\":\"ltr\",\"title\":\"高校列表\",\"show-close\":false,\"wrapperClosable\":false,\"id\":\"drawer\",\"size\":\"320px\"},on:{\"update:visible\":function($event){_vm.elDrawer=$event}}},[_c('el-autocomplete',{staticClass:\"inline-input\",staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入名称\",\"prefix-icon\":\"el-icon-search\",\"fetch-suggestions\":_vm.querySearch},on:{\"select\":_vm.handleSelect},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-table',{ref:\"listTable\",attrs:{\"data\":_vm.nameList,\"highlight-current-row\":\"\",\"height\":\"calc(100vh - 45px)\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{attrs:{\"property\":\"value\",\"label\":\"高校名称\",\"align\":\"center\",\"sortable\":\"\"}})],1)],1),_c('el-container',[_c('el-header',{attrs:{\"height\":\"auto\"}},[(_vm.currentRow)?_c('el-row',[_c('el-col',{attrs:{\"lg\":8,\"xs\":24}},[_c('h2',[_vm._v(_vm._s(_vm.currentRow.value))])]),_c('el-col',{attrs:{\"lg\":8,\"xs\":24}},[_c('span',[_vm._v(\"\\n              合作广度（国家数量）\\n              \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.currentData.slice(1).filter(function (d){ return d!==0; }).length))])])]),_c('el-col',{attrs:{\"lg\":8,\"xs\":24}},[_c('span',[_vm._v(\"\\n              合作深度（总次数）\\n              \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.totalCites))])])])],1):_vm._e()],1),_c('el-main',[_c('div',{attrs:{\"id\":\"canvas\"}})]),_c('el-footer',{attrs:{\"height\":\"auto\"}},[_c('el-table',{ref:\"indexTable\",attrs:{\"data\":_vm.currentTableData,\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"property\":\"indicatorName\",\"label\":\"国家\",\"align\":\"left\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"property\":\"indicatorValue\",\"label\":\"合作次数\",\"align\":\"center\",\"sortable\":\"\"}})],1)],1),_c('CopyRight')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"module\">\r\n    <el-button\r\n      type=\"primary\"\r\n      :icon=\"unfold?'el-icon-s-unfold':'el-icon-s-fold'\"\r\n      plain\r\n      style=\"padding:10px 12px;font-size:20px\"\r\n      class=\"hidden-lg-and-up\"\r\n      :class=\"[unfold?'unfold':'fold']\"\r\n      @click=\"selectUnfold\"\r\n    ></el-button>\r\n    <el-container>\r\n      <el-aside class=\"hidden-md-and-down\">\r\n        <el-autocomplete\r\n          class=\"inline-input\"\r\n          placeholder=\"请输入名称\"\r\n          prefix-icon=\"el-icon-search\"\r\n          :fetch-suggestions=\"querySearch\"\r\n          v-model=\"name\"\r\n          @select=\"handleSelect\"\r\n        ></el-autocomplete>\r\n        <el-table\r\n          ref=\"listTable\"\r\n          :data=\"nameList\"\r\n          highlight-current-row\r\n          height=\"calc(100vh - 60px)\"\r\n          @current-change=\"handleCurrentChange\"\r\n        >\r\n          <el-table-column property=\"value\" label=\"高校名称\" align=\"center\" sortable></el-table-column>\r\n        </el-table>\r\n      </el-aside>\r\n      <el-drawer\r\n        :visible.sync=\"elDrawer\"\r\n        direction=\"ltr\"\r\n        title=\"高校列表\"\r\n        :show-close=\"false\"\r\n        :wrapperClosable=\"false\"\r\n        class=\"hidden-lg-and-up\"\r\n        id=\"drawer\"\r\n        size = \"320px\"\r\n      >\r\n        <el-autocomplete\r\n          class=\"inline-input\"\r\n          placeholder=\"请输入名称\"\r\n          prefix-icon=\"el-icon-search\"\r\n          :fetch-suggestions=\"querySearch\"\r\n          v-model=\"name\"\r\n          style=\"width:100%\"\r\n          @select=\"handleSelect\"\r\n        ></el-autocomplete>\r\n        <el-table\r\n          ref=\"listTable\"\r\n          :data=\"nameList\"\r\n          highlight-current-row\r\n          height=\"calc(100vh - 45px)\"\r\n          @current-change=\"handleCurrentChange\"\r\n        >\r\n          <el-table-column property=\"value\" label=\"高校名称\" align=\"center\" sortable></el-table-column>\r\n        </el-table>\r\n      </el-drawer>\r\n      <el-container>\r\n        <el-header height=\"auto\">\r\n          <el-row v-if=\"currentRow\">\r\n            <el-col :lg=\"8\" :xs=\"24\">\r\n              <h2>{{currentRow.value}}</h2>\r\n            </el-col>\r\n            <el-col :lg=\"8\" :xs=\"24\">\r\n              <span>\r\n                合作广度（国家数量）\r\n                <br />\r\n                <strong>{{currentData.slice(1).filter(d=>d!==0).length}}</strong>\r\n              </span>\r\n            </el-col>\r\n            <el-col :lg=\"8\" :xs=\"24\">\r\n              <span>\r\n                合作深度（总次数）\r\n                <br />\r\n                <strong>{{totalCites}}</strong>\r\n              </span>\r\n            </el-col>\r\n          </el-row>\r\n        </el-header>\r\n        <el-main>\r\n          <div id=\"canvas\"></div>\r\n        </el-main>\r\n        <el-footer height=\"auto\">\r\n          <el-table ref=\"indexTable\" :data=\"currentTableData\" highlight-current-row>\r\n            <el-table-column type=\"index\" align=\"center\"></el-table-column>\r\n            <el-table-column property=\"indicatorName\" label=\"国家\" align=\"left\" sortable></el-table-column>\r\n            <el-table-column property=\"indicatorValue\" label=\"合作次数\" align=\"center\" sortable></el-table-column>\r\n          </el-table>\r\n        </el-footer>\r\n        <CopyRight></CopyRight>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { Table,TableColumn,Drawer} from \"element-ui\"\r\nimport Vue from \"vue\";\r\nimport * as echarts from \"echarts/lib/echarts\";\r\nimport \"echarts/lib/chart/map\";\r\nimport \"echarts/lib/component/visualMapContinuous\";\r\nimport \"echarts/lib/component/tooltip\";\r\nimport CopyRight from \"@/components/CopyRight.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      elDrawer: false,\r\n      unfold: true,\r\n      currentRow: null,\r\n      currentData: []\r\n    };\r\n  },\r\n  components: {\r\n    CopyRight,\r\n    \"el-table\":Table,\r\n    \"el-table-column\":TableColumn,\r\n    \"el-drawer\":Drawer\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"initData\", { name: \"worldMap\" });\r\n    //在页面加载时读取localStorage里的状态信息\r\n    localStorage.getItem(\"dataset\") &&\r\n      this.$store.replaceState(\r\n        Object.assign(\r\n          this.$store.state,\r\n          JSON.parse(localStorage.getItem(\"dataset\"))\r\n        )\r\n      );\r\n    //在页面刷新时将vuex里的信息保存到localStorage里\r\n    window.addEventListener(\"beforeunload\", () => {\r\n      localStorage.setItem(\"dataset\", JSON.stringify(this.$store.state));\r\n    });\r\n  },\r\n  updated() {\r\n    let id = this.currentRow ? this.currentRow.id - 1 : 0;\r\n    this.$refs.listTable.setCurrentRow(this.nameList[id]);\r\n  },\r\n  methods: {\r\n    selectUnfold() {\r\n      this.elDrawer = !this.elDrawer;\r\n      this.unfold = !this.unfold;\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentRow = val;\r\n      this.currentData = this.dataList[this.currentRow.id - 1].map(\r\n        (d, index) => {\r\n          return index !== 0 ? +d : d;\r\n        }\r\n      );\r\n      this.drawRadar();\r\n    },\r\n    handleSelect(val) {\r\n      this.$refs.listTable.setCurrentRow(this.nameList[val.id - 1]);\r\n    },\r\n    querySearch(queryString, cb) {\r\n      var results = queryString\r\n        ? this.nameList.filter(item => item.value.indexOf(queryString) === 0)\r\n        : this.nameList;\r\n      cb(results);\r\n    },\r\n    drawRadar() {\r\n      let chart = echarts.init(document.getElementById(\"canvas\"));\r\n      chart.showLoading();\r\n      Vue.axios.get(`../data/world-countries.json`).then(response => {\r\n        chart.hideLoading();\r\n        //过滤南极洲\r\n        let features = response.data.features.filter(\r\n          d => d.properties.name !== \"Antarctica\"\r\n        );\r\n        let worldGeo = { ...response.data, features };\r\n\r\n        echarts.registerMap(\"WORLD\", worldGeo);\r\n        chart.setOption({\r\n          tooltip: {},\r\n          visualMap: {\r\n            type: \"continuous\",\r\n            min: 0,\r\n            max: Math.max(...this.currentData.slice(1)),\r\n            range: [1, Math.max(...this.currentData.slice(1))],\r\n            text: [\"High\", \"Low\"],\r\n            realtime: false,\r\n            calculable: false,\r\n            inRange: {\r\n              color: [\"#C0C4CC\", \"#F56C6C\"]\r\n            },\r\n            left: 40\r\n          },\r\n          series: [\r\n            {\r\n              type: \"map\",\r\n              mapType: \"WORLD\",\r\n              itemStyle: {},\r\n              emphasis: {\r\n                label: {\r\n                  show: false\r\n                },\r\n                itemStyle: {\r\n                  color: \"#1890FF\",\r\n                  areaColor: \"#1890FF\"\r\n                }\r\n              },\r\n              data: this.currentData.slice(1).map((d, index) => {\r\n                return {\r\n                  name: this.indicatorsList[index + 1],\r\n                  value: d\r\n                };\r\n              }),\r\n              tooltip: {\r\n                formatter: params => {\r\n                  return `${params.data.name}<br>合作次数${params.data.value}`;\r\n                },\r\n                backgroundColor: \"rgba(255,255,255,0.8)\",\r\n                textStyle: {\r\n                  color: \"#606266\",\r\n                  fontWeight: \"bold\"\r\n                },\r\n                extraCssText: \"box-shadow: 0px 0px 4px rgba(0,0,0,0.4)\"\r\n              }\r\n            }\r\n          ]\r\n        });\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"indicatorsList\", \"dataList\", \"nameList\"]),\r\n    currentTableData() {\r\n      let that = this;\r\n      return this.currentData\r\n        .slice(1)\r\n        .map((d, index) => {\r\n          return {\r\n            indicatorName: that.indicatorsList[index + 1],\r\n            indicatorValue: d\r\n          };\r\n        })\r\n        .filter(d => d.indicatorValue !== 0);\r\n    },\r\n    totalCites() {\r\n      return this.currentData.slice(1).reduce((accumulator, cur) => {\r\n        return (accumulator += cur);\r\n      }, 0);\r\n    },\r\n    maxminData() {\r\n      let init = new Array(this.dataList[0].length - 2).fill(0);\r\n      let maxData = this.dataList.reduce((accumulator, cur) => {\r\n        let idata = cur.slice(2);\r\n        return accumulator.map((d, index) =>\r\n          d > +idata[index] ? d : +idata[index]\r\n        );\r\n      }, init);\r\n\r\n      let minData = this.dataList.reduce((accumulator, cur) => {\r\n        let idata = cur.slice(2);\r\n        return accumulator.map((d, index) =>\r\n          d < +idata[index] ? d : +idata[index]\r\n        );\r\n      }, init);\r\n\r\n      return {\r\n        maxData,\r\n        minData\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import url(\"../assets/less/base.less\");\r\n.module {\r\n  .el-button {\r\n    position: fixed;\r\n    top: 60px;\r\n    z-index: 3000;\r\n    border-top-left-radius: 0rem;\r\n    border-bottom-left-radius: 0rem;\r\n    border-left-width: 0rem;\r\n    &.fold {\r\n      -webkit-animation: ltr-drawer-in 225ms cubic-bezier(0, 0, 1, 1) 0s;\r\n      animation: ltr-drawer-in 225ms cubic-bezier(0, 0, 1, 1) 0s;\r\n      left: 320px;\r\n    }\r\n    &.unfold {\r\n      left: 0px;\r\n    }\r\n  }\r\n  .el-container {\r\n    .el-aside {\r\n      padding: 20px;\r\n      background: #fff;\r\n      position: sticky;\r\n      position: -webkit-sticky;\r\n      top: 0px;\r\n      z-index: 100;\r\n      height: 100vh;\r\n      overflow: hidden !important;\r\n      .el-autocomplete {\r\n        background-color: #ebeef5;\r\n        width: 100%;\r\n      }\r\n    }\r\n\r\n    .el-container {\r\n      margin: 0px 20px 0px 20px;\r\n      .el-header {\r\n        background-color: #fff;\r\n        margin: 20px 0;\r\n        .el-row {\r\n          .el-col {\r\n            padding: 1rem 0;\r\n          }\r\n        }\r\n        h2 {\r\n          color: @brand-color;\r\n          font-weight: 600;\r\n        }\r\n        span {\r\n          line-height: 2rem;\r\n        }\r\n        strong {\r\n          font-size: 1.8rem;\r\n          color: @brand-color;\r\n        }\r\n      }\r\n      .el-main {\r\n        margin-left: 0;\r\n        margin-top: 0;\r\n        width: 100%;\r\n        background-color: #fff;\r\n        #canvas {\r\n          height: 80vh;\r\n          background-color: #fff;\r\n          padding: 20px 0;\r\n        }\r\n      }\r\n      .el-footer {\r\n        margin: 20px 0 0 0;\r\n        padding: 0;\r\n        background-color: #fff;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorldMap.vue?vue&type=template&id=23d477da&\"\nimport script from \"./WorldMap.vue?vue&type=script&lang=js&\"\nexport * from \"./WorldMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorldMap.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var colorList = seriesModel.get('color');\n    var itemStyleModel = seriesModel.getModel('itemStyle');\n    var areaColor = itemStyleModel.get('areaColor');\n    var color = itemStyleModel.get('color') || colorList[seriesModel.seriesIndex % colorList.length];\n    seriesModel.getData().setVisual({\n      'areaColor': areaColor,\n      'color': color\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar createHashMap = _util.createHashMap;\n\nvar mapDataStorage = require(\"./mapDataStorage\");\n\nvar geoJSONLoader = require(\"./geoJSONLoader\");\n\nvar geoSVGLoader = require(\"./geoSVGLoader\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar loaders = {\n  geoJSON: geoJSONLoader,\n  svg: geoSVGLoader\n};\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} nameMap\n   * @return {Object} source {regions, regionsMap, nameCoordMap, boundingRect}\n   */\n  load: function (mapName, nameMap) {\n    var regions = [];\n    var regionsMap = createHashMap();\n    var nameCoordMap = createHashMap();\n    var boundingRect;\n    var mapRecords = retrieveMap(mapName);\n    each(mapRecords, function (record) {\n      var singleSource = loaders[record.type].load(mapName, record);\n      each(singleSource.regions, function (region) {\n        var regionName = region.name; // Try use the alias in geoNameMap\n\n        if (nameMap && nameMap.hasOwnProperty(regionName)) {\n          region = region.cloneShallow(regionName = nameMap[regionName]);\n        }\n\n        regions.push(region);\n        regionsMap.set(regionName, region);\n        nameCoordMap.set(regionName, region.center);\n      });\n      var rect = singleSource.boundingRect;\n\n      if (rect) {\n        boundingRect ? boundingRect.union(rect) : boundingRect = rect.clone();\n      }\n    });\n    return {\n      regions: regions,\n      regionsMap: regionsMap,\n      nameCoordMap: nameCoordMap,\n      // FIXME Always return new ?\n      boundingRect: boundingRect || new BoundingRect(0, 0, 0, 0)\n    };\n  },\n\n  /**\n   * @param {string} mapName\n   * @param {string} hostKey For cache.\n   * @return {Array.<module:zrender/Element>} Roots.\n   */\n  makeGraphic: makeInvoker('makeGraphic'),\n\n  /**\n   * @param {string} mapName\n   * @param {string} hostKey For cache.\n   */\n  removeGraphic: makeInvoker('removeGraphic')\n};\n\nfunction makeInvoker(methodName) {\n  return function (mapName, hostKey) {\n    var mapRecords = retrieveMap(mapName);\n    var results = [];\n    each(mapRecords, function (record) {\n      var method = loaders[record.type][methodName];\n      method && results.push(method(mapName, record, hostKey));\n    });\n    return results;\n  };\n}\n\nfunction mapNotExistsError(mapName) {}\n\nfunction retrieveMap(mapName) {\n  var mapRecords = mapDataStorage.retrieveMap(mapName) || [];\n  return mapRecords;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar _number = require(\"../util/number\");\n\nvar linearMap = _number.linearMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n/**\n * @param {Object} option\n * @param {string} [option.type] See visualHandlers.\n * @param {string} [option.mappingMethod] 'linear' or 'piecewise' or 'category' or 'fixed'\n * @param {Array.<number>=} [option.dataExtent] [minExtent, maxExtent],\n *                                              required when mappingMethod is 'linear'\n * @param {Array.<Object>=} [option.pieceList] [\n *                                             {value: someValue},\n *                                             {interval: [min1, max1], visual: {...}},\n *                                             {interval: [min2, max2]}\n *                                             ],\n *                                            required when mappingMethod is 'piecewise'.\n *                                            Visual for only each piece can be specified.\n * @param {Array.<string|Object>=} [option.categories] ['cate1', 'cate2']\n *                                            required when mappingMethod is 'category'.\n *                                            If no option.categories, categories is set\n *                                            as [0, 1, 2, ...].\n * @param {boolean} [option.loop=false] Whether loop mapping when mappingMethod is 'category'.\n * @param {(Array|Object|*)} [option.visual]  Visual data.\n *                                            when mappingMethod is 'category',\n *                                            visual data can be array or object\n *                                            (like: {cate1: '#222', none: '#fff'})\n *                                            or primary types (which represents\n *                                            defualt category visual), otherwise visual\n *                                            can be array or primary (which will be\n *                                            normalized to array).\n *\n */\n\nvar VisualMapping = function (option) {\n  var mappingMethod = option.mappingMethod;\n  var visualType = option.type;\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n\n  var thisOption = this.option = zrUtil.clone(option);\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.type = visualType;\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.mappingMethod = mappingMethod;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._normalizeData = normalizers[mappingMethod];\n  var visualHandler = visualHandlers[visualType];\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.applyVisual = visualHandler.applyVisual;\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.getColorMapper = visualHandler.getColorMapper;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._doMap = visualHandler._doMap[mappingMethod];\n\n  if (mappingMethod === 'piecewise') {\n    normalizeVisualRange(thisOption);\n    preprocessForPiecewise(thisOption);\n  } else if (mappingMethod === 'category') {\n    thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n    // which need no more preprocess except normalize visual.\n    : normalizeVisualRange(thisOption, true);\n  } else {\n    // mappingMethod === 'linear' or 'fixed'\n    zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n    normalizeVisualRange(thisOption);\n  }\n};\n\nVisualMapping.prototype = {\n  constructor: VisualMapping,\n  mapValueToVisual: function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._doMap(normalized, value);\n  },\n  getNormalizer: function () {\n    return zrUtil.bind(this._normalizeData, this);\n  }\n};\nvar visualHandlers = VisualMapping.visualHandlers = {\n  color: {\n    applyVisual: makeApplyVisual('color'),\n\n    /**\n     * Create a mapper function\n     * @return {Function}\n     */\n    getColorMapper: function () {\n      var thisOption = this.option;\n      return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n        !isNormalized && (value = this._normalizeData(value));\n        return doMapCategory.call(this, value);\n      } : function (value, isNormalized, out) {\n        // If output rgb array\n        // which will be much faster and useful in pixel manipulation\n        var returnRGBArray = !!out;\n        !isNormalized && (value = this._normalizeData(value));\n        out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n        return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n      }, this);\n    },\n    _doMap: {\n      linear: function (normalized) {\n        return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n      },\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  colorHue: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, value);\n  }),\n  colorSaturation: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, value);\n  }),\n  colorLightness: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, null, value);\n  }),\n  colorAlpha: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyAlpha(color, value);\n  }),\n  opacity: {\n    applyVisual: makeApplyVisual('opacity'),\n    _doMap: makeDoMap([0, 1])\n  },\n  liftZ: {\n    applyVisual: makeApplyVisual('liftZ'),\n    _doMap: {\n      linear: doMapFixed,\n      category: doMapFixed,\n      piecewise: doMapFixed,\n      fixed: doMapFixed\n    }\n  },\n  symbol: {\n    applyVisual: function (value, getter, setter) {\n      var symbolCfg = this.mapValueToVisual(value);\n\n      if (zrUtil.isString(symbolCfg)) {\n        setter('symbol', symbolCfg);\n      } else if (isObject(symbolCfg)) {\n        for (var name in symbolCfg) {\n          if (symbolCfg.hasOwnProperty(name)) {\n            setter(name, symbolCfg[name]);\n          }\n        }\n      }\n    },\n    _doMap: {\n      linear: doMapToArray,\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = doMapToArray.call(this, normalized);\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  symbolSize: {\n    applyVisual: makeApplyVisual('symbolSize'),\n    _doMap: makeDoMap([0, 1])\n  }\n};\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var visual = thisOption.visual;\n  var categoryMap = thisOption.categoryMap = {};\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      value = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), value));\n    },\n    _doMap: makeDoMap([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {};\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  return this.option.visual[0];\n}\n\nfunction makeDoMap(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      return zrColor.parse(item);\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n/**\n * List available visual types.\n *\n * @public\n * @return {Array.<string>}\n */\n\nVisualMapping.listVisualTypes = function () {\n  var visualTypes = [];\n  zrUtil.each(visualHandlers, function (handler, key) {\n    visualTypes.push(key);\n  });\n  return visualTypes;\n};\n/**\n * @public\n */\n\n\nVisualMapping.addVisualHandler = function (name, handler) {\n  visualHandlers[name] = handler;\n};\n/**\n * @public\n */\n\n\nVisualMapping.isValidType = function (visualType) {\n  return visualHandlers.hasOwnProperty(visualType);\n};\n/**\n * Convinent method.\n * Visual can be Object or Array or primary type.\n *\n * @public\n */\n\n\nVisualMapping.eachVisual = function (visual, callback, context) {\n  if (zrUtil.isObject(visual)) {\n    zrUtil.each(visual, callback, context);\n  } else {\n    callback.call(context, visual);\n  }\n};\n\nVisualMapping.mapVisual = function (visual, callback, context) {\n  var isPrimary;\n  var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n  VisualMapping.eachVisual(visual, function (v, key) {\n    var newVal = callback.call(context, v, key);\n    isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n  });\n  return newVisual;\n};\n/**\n * @public\n * @param {Object} obj\n * @return {Object} new object containers visual values.\n *                 If no visuals, return null.\n */\n\n\nVisualMapping.retrieveVisuals = function (obj) {\n  var ret = {};\n  var hasVisual;\n  obj && each(visualHandlers, function (h, visualType) {\n    if (obj.hasOwnProperty(visualType)) {\n      ret[visualType] = obj[visualType];\n      hasVisual = true;\n    }\n  });\n  return hasVisual ? ret : null;\n};\n/**\n * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n *\n * @public\n * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n * @return {Array.<string>} Sorted visual types.\n */\n\n\nVisualMapping.prepareVisualTypes = function (visualTypes) {\n  if (isObject(visualTypes)) {\n    var types = [];\n    each(visualTypes, function (item, type) {\n      types.push(type);\n    });\n    visualTypes = types;\n  } else if (zrUtil.isArray(visualTypes)) {\n    visualTypes = visualTypes.slice();\n  } else {\n    return [];\n  }\n\n  visualTypes.sort(function (type1, type2) {\n    // color should be front of colorSaturation, colorAlpha, ...\n    // symbol and symbolSize do not matter.\n    return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n  });\n  return visualTypes;\n};\n/**\n * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n * Other visuals are only depends on themself.\n *\n * @public\n * @param {string} visualType1\n * @param {string} visualType2\n * @return {boolean}\n */\n\n\nVisualMapping.dependsOn = function (visualType1, visualType2) {\n  return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n};\n/**\n * @param {number} value\n * @param {Array.<Object>} pieceList [{value: ..., interval: [min, max]}, ...]\n *                         Always from small to big.\n * @param {boolean} [findClosestWhenOutside=false]\n * @return {number} index\n */\n\n\nVisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n  var possibleI;\n  var abs = Infinity; // value has the higher priority.\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var pieceValue = pieceList[i].value;\n\n    if (pieceValue != null) {\n      if (pieceValue === value // FIXME\n      // It is supposed to compare value according to value type of dimension,\n      // but currently value type can exactly be string or number.\n      // Compromise for numeric-like string (like '12'), especially\n      // in the case that visualMap.categories is ['22', '33'].\n      || typeof pieceValue === 'string' && pieceValue === value + '') {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(pieceValue, i);\n    }\n  }\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var piece = pieceList[i];\n    var interval = piece.interval;\n    var close = piece.close;\n\n    if (interval) {\n      if (interval[0] === -Infinity) {\n        if (littleThan(close[1], value, interval[1])) {\n          return i;\n        }\n      } else if (interval[1] === Infinity) {\n        if (littleThan(close[0], interval[0], value)) {\n          return i;\n        }\n      } else if (littleThan(close[0], interval[0], value) && littleThan(close[1], value, interval[1])) {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(interval[0], i);\n      findClosestWhenOutside && updatePossible(interval[1], i);\n    }\n  }\n\n  if (findClosestWhenOutside) {\n    return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n  }\n\n  function updatePossible(val, index) {\n    var newAbs = Math.abs(val - value);\n\n    if (newAbs < abs) {\n      abs = newAbs;\n      possibleI = index;\n    }\n  }\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nvar _default = VisualMapping;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual mapping.\n */\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nvar _default = visualDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./map/MapSeries\");\n\nrequire(\"./map/MapView\");\n\nrequire(\"../action/geoRoam\");\n\nrequire(\"../coord/geo/geoCreator\");\n\nvar mapSymbolLayout = require(\"./map/mapSymbolLayout\");\n\nvar mapVisual = require(\"./map/mapVisual\");\n\nvar mapDataStatistic = require(\"./map/mapDataStatistic\");\n\nvar backwardCompat = require(\"./map/backwardCompat\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerLayout(mapSymbolLayout);\necharts.registerVisual(mapVisual);\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\necharts.registerPreprocessor(backwardCompat);\ncreateDataSelectAction('map', [{\n  type: 'mapToggleSelect',\n  event: 'mapselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'mapSelect',\n  event: 'mapselected',\n  method: 'select'\n}, {\n  type: 'mapUnSelect',\n  event: 'mapunselected',\n  method: 'unSelect'\n}]);","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".module .el-button{position:fixed;top:60px;z-index:3000;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.module .el-button.fold{-webkit-animation:ltr-drawer-in 225ms linear 0s;animation:ltr-drawer-in 225ms linear 0s;left:320px}.module .el-button.unfold{left:0}.module .el-container .el-aside{padding:20px;background:#fff;position:sticky;position:-webkit-sticky;top:0;z-index:100;height:100vh;overflow:hidden!important}.module .el-container .el-aside .el-autocomplete{background-color:#ebeef5;width:100%}.module .el-container .el-container{margin:0 20px 0 20px}.module .el-container .el-container .el-header{background-color:#fff;margin:20px 0}.module .el-container .el-container .el-header .el-row .el-col{padding:1rem 0}.module .el-container .el-container .el-header h2{color:#1890ff;font-weight:600}.module .el-container .el-container .el-header span{line-height:2rem}.module .el-container .el-container .el-header strong{font-size:1.8rem;color:#1890ff}.module .el-container .el-container .el-main{margin-left:0;margin-top:0;width:100%;background-color:#fff}.module .el-container .el-container .el-main #canvas{height:80vh;background-color:#fff;padding:20px 0}.module .el-container .el-container .el-footer{margin:20px 0 0 0;padding:0;background-color:#fff}\", \"\"]);\n\n// exports\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar geoCoordMap = {\n  'Russia': [100, 60],\n  'United States': [-99, 38],\n  'United States of America': [-99, 38]\n};\n\nfunction _default(mapType, region) {\n  if (mapType === 'world') {\n    var geoCoord = geoCoordMap[region.name];\n\n    if (geoCoord) {\n      var cp = region.center;\n      cp[0] = geoCoord[0];\n      cp[1] = geoCoord[1];\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nvar v2ApplyTransform = vector.applyTransform; // Dummy transform node\n\nfunction TransformDummy() {\n  Transformable.call(this);\n}\n\nzrUtil.mixin(TransformDummy, Transformable);\n\nfunction View(name) {\n  /**\n   * @type {string}\n   */\n  this.name = name;\n  /**\n   * @type {Object}\n   */\n\n  this.zoomLimit;\n  Transformable.call(this);\n  this._roamTransformable = new TransformDummy();\n  this._rawTransformable = new TransformDummy();\n  this._center;\n  this._zoom;\n}\n\nView.prototype = {\n  constructor: View,\n  type: 'view',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Set bounding rect\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  // PENDING to getRect\n  setBoundingRect: function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  setViewRect: function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  },\n\n  /**\n   * Transformed to particular position and size\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransform.decomposeTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * Set center of view\n   * @param {Array.<number>} [centerCoord]\n   */\n  setCenter: function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * @param {number} zoom\n   */\n  setZoom: function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * Get default center without roam\n   */\n  getDefaultCenter: function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  },\n  getCenter: function () {\n    return this._center || this.getDefaultCenter();\n  },\n  getZoom: function () {\n    return this._zoom || 1;\n  },\n\n  /**\n   * @return {Array.<number}\n   */\n  getRoamTransform: function () {\n    return this._roamTransformable.getLocalTransform();\n  },\n\n  /**\n   * Remove roam\n   */\n  _updateCenterAndZoom: function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.origin = center;\n    roamTransform.position = [defaultCenter[0] - center[0], defaultCenter[1] - center[1]];\n    roamTransform.scale = [zoom, zoom];\n\n    this._updateTransform();\n  },\n\n  /**\n   * Update transform from roam and mapLocation\n   * @private\n   */\n  _updateTransform: function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRect: function () {\n    return this._viewRect;\n  },\n\n  /**\n   * Get view rect after roam transform\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRectAfterRoam: function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  },\n\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   * @param {Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  },\n\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToData: function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  },\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  containPoint: function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  }\n  /**\n   * @return {number}\n   */\n  // getScalarScale: function () {\n  //     // Use determinant square root of transform to mutiply scalar\n  //     var m = this.transform;\n  //     var det = Math.sqrt(Math.abs(m[0] * m[3] - m[2] * m[1]));\n  //     return det;\n  // }\n\n};\nzrUtil.mixin(View, Transformable);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var seriesModel = finder.seriesModel;\n  var coordSys = seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = View;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function (targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar layout = require(\"../../util/layout\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentView({\n  type: 'visualMap',\n\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n  autoPositionValues: {\n    left: 1,\n    right: 1,\n    top: 1,\n    bottom: 1\n  },\n  init: function (ecModel, api) {\n    /**\n     * @readOnly\n     * @type {module:echarts/model/Global}\n     */\n    this.ecModel = ecModel;\n    /**\n     * @readOnly\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this.api = api;\n    /**\n     * @readOnly\n     * @type {module:echarts/component/visualMap/visualMapModel}\n     */\n\n    this.visualMapModel;\n  },\n\n  /**\n   * @protected\n   */\n  render: function (visualMapModel, ecModel, api, payload) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender.apply(this, arguments);\n  },\n\n  /**\n   * @protected\n   */\n  renderBackground: function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new graphic.Rect({\n      z2: -1,\n      // Lay background rect on the lowest layer.\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  },\n\n  /**\n   * @protected\n   * @param {number} targetValue can be Infinity or -Infinity\n   * @param {string=} visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param {Object} [opts]\n   * @param {string=} [opts.forceState] Specify state, instead of using getValueState method.\n   * @param {string=} [opts.convertOpacityToAlpha=false] For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  getControllerVisual: function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'symbol') {\n      visualObj.symbol = visualMapModel.get('itemSymbol');\n    }\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  },\n\n  /**\n   * @protected\n   */\n  positionGroup: function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  },\n\n  /**\n   * @protected\n   * @abstract\n   */\n  doRender: zrUtil.noop\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/ContinuousModel\");\n\nrequire(\"./visualMap/ContinuousView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(option) {\n  // Save geoCoord\n  var mapSeries = [];\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'map') {\n      mapSeries.push(seriesOpt);\n      seriesOpt.map = seriesOpt.map || seriesOpt.mapType; // Put x, y, width, height, x2, y2 in the top level\n\n      zrUtil.defaults(seriesOpt, seriesOpt.mapLocation);\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ATTR = '\\0_ec_interaction_mutex';\n\nfunction take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\n\nfunction release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\n\nfunction isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});\nexports.take = take;\nexports.release = release;\nexports.isTaken = isTaken;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar MapDraw = require(\"../../component/helper/MapDraw\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar HIGH_DOWN_PROP = '__seriesMapHighDown';\nvar RECORD_VERSION_PROP = '__seriesMapCallKey';\n\nvar _default = echarts.extendChartView({\n  type: 'map',\n  render: function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api, true);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  },\n  remove: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  },\n  dispose: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  },\n  _renderSymbols: function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          fill: mapModel.getData().getVisual('color')\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? graphic.Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name = originalData.getName(originalDataIndex);\n        var fullIndex = fullData.indexOfName(name);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var hoverLabelModel = itemModel.getModel('emphasis.label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the begining, and this scenario is rarely encountered.\n        // So it won't be fixed until have to.\n\n        var normalText = zrUtil.retrieve2(mapModel.getFormattedLabel(fullIndex, 'normal'), name);\n        var emphasisText = zrUtil.retrieve2(mapModel.getFormattedLabel(fullIndex, 'emphasis'), normalText);\n        var highDownRecord = regionGroup[HIGH_DOWN_PROP];\n        var recordVersion = Math.random(); // Prevent from register listeners duplicatedly when roaming.\n\n        if (!highDownRecord) {\n          highDownRecord = regionGroup[HIGH_DOWN_PROP] = {};\n          var onEmphasis = zrUtil.curry(onRegionHighDown, true);\n          var onNormal = zrUtil.curry(onRegionHighDown, false);\n          regionGroup.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n        } // Prevent removed regions effect current grapics.\n\n\n        regionGroup[RECORD_VERSION_PROP] = recordVersion;\n        zrUtil.extend(highDownRecord, {\n          recordVersion: recordVersion,\n          circle: circle,\n          labelModel: labelModel,\n          hoverLabelModel: hoverLabelModel,\n          emphasisText: emphasisText,\n          normalText: normalText\n        }); // FIXME\n        // Consider set option when emphasis.\n\n        enterRegionHighDown(highDownRecord, false);\n      }\n\n      group.add(circle);\n    });\n  }\n});\n\nfunction onRegionHighDown(toHighOrDown) {\n  var highDownRecord = this[HIGH_DOWN_PROP];\n\n  if (highDownRecord && highDownRecord.recordVersion === this[RECORD_VERSION_PROP]) {\n    enterRegionHighDown(highDownRecord, toHighOrDown);\n  }\n}\n\nfunction enterRegionHighDown(highDownRecord, toHighOrDown) {\n  var circle = highDownRecord.circle;\n  var labelModel = highDownRecord.labelModel;\n  var hoverLabelModel = highDownRecord.hoverLabelModel;\n  var emphasisText = highDownRecord.emphasisText;\n  var normalText = highDownRecord.normalText;\n\n  if (toHighOrDown) {\n    circle.style.extendFrom(graphic.setTextStyle({}, hoverLabelModel, {\n      text: hoverLabelModel.get('show') ? emphasisText : null\n    }, {\n      isRectText: true,\n      useInsideStyle: false\n    }, true)); // Make label upper than others if overlaps.\n\n    circle.__mapOriginalZ2 = circle.z2;\n    circle.z2 += graphic.Z2_EMPHASIS_LIFT;\n  } else {\n    graphic.setTextStyle(circle.style, labelModel, {\n      text: labelModel.get('show') ? normalText : null,\n      textPosition: labelModel.getShallow('position') || 'bottom'\n    }, {\n      isRectText: true,\n      useInsideStyle: false\n    }); // Trigger normalize style like padding.\n\n    circle.dirty(false);\n\n    if (circle.__mapOriginalZ2 != null) {\n      circle.z2 = circle.__mapOriginalZ2;\n      circle.__mapOriginalZ2 = null;\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for 钓鱼岛\n// var Region = require('../Region');\n// var zrUtil = require('zrender/src/core/util');\n// var geoCoord = [126, 25];\nvar points = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];\n\nfunction _default(mapType, region) {\n  if (mapType === 'china' && region.name === '台湾') {\n    region.geometries.push({\n      type: 'polygon',\n      exterior: points[0]\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar VISUAL_PRIORITY = echarts.PRIORITY.VISUAL.COMPONENT;\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimension(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}); // Only support color.\n\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var concreteDim = visualMapModel.getDataDimension(data);\n        var dimInfo = data.getDimensionInfo(concreteDim);\n\n        if (dimInfo != null) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimInfo.index;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}); // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: seriesModel.getData().getVisual('color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\n\nfunction _default(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Component = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nComponent.registerSubTypeDefaulter('visualMap', function (option) {\n  // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n  return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nfunction onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES[model.mainType] && coordSys && coordSys.model !== targetCoordSysModel;\n}\n\nexports.onIrrelevantElement = onIrrelevantElement;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _parseSVG = require(\"zrender/lib/tool/parseSVG\");\n\nvar parseSVG = _parseSVG.parseSVG;\nvar makeViewBoxTransform = _parseSVG.makeViewBoxTransform;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar assert = _util.assert;\nvar createHashMap = _util.createHashMap;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} mapRecord {specialAreas, geoJSON}\n   * @return {Object} {root, boundingRect}\n   */\n  load: function (mapName, mapRecord) {\n    var originRoot = inner(mapRecord).originRoot;\n\n    if (originRoot) {\n      return {\n        root: originRoot,\n        boundingRect: inner(mapRecord).boundingRect\n      };\n    }\n\n    var graphic = buildGraphic(mapRecord);\n    inner(mapRecord).originRoot = graphic.root;\n    inner(mapRecord).boundingRect = graphic.boundingRect;\n    return graphic;\n  },\n  makeGraphic: function (mapName, mapRecord, hostKey) {\n    // For performance consideration (in large SVG), graphic only maked\n    // when necessary and reuse them according to hostKey.\n    var field = inner(mapRecord);\n    var rootMap = field.rootMap || (field.rootMap = createHashMap());\n    var root = rootMap.get(hostKey);\n\n    if (root) {\n      return root;\n    }\n\n    var originRoot = field.originRoot;\n    var boundingRect = field.boundingRect; // For performance, if originRoot is not used by a view,\n    // assign it to a view, but not reproduce graphic elements.\n\n    if (!field.originRootHostKey) {\n      field.originRootHostKey = hostKey;\n      root = originRoot;\n    } else {\n      root = buildGraphic(mapRecord, boundingRect).root;\n    }\n\n    return rootMap.set(hostKey, root);\n  },\n  removeGraphic: function (mapName, mapRecord, hostKey) {\n    var field = inner(mapRecord);\n    var rootMap = field.rootMap;\n    rootMap && rootMap.removeKey(hostKey);\n\n    if (hostKey === field.originRootHostKey) {\n      field.originRootHostKey = null;\n    }\n  }\n};\n\nfunction buildGraphic(mapRecord, boundingRect) {\n  var svgXML = mapRecord.svgXML;\n  var result;\n  var root;\n\n  try {\n    result = svgXML && parseSVG(svgXML, {\n      ignoreViewBox: true,\n      ignoreRootClip: true\n    }) || {};\n    root = result.root;\n    assert(root != null);\n  } catch (e) {\n    throw new Error('Invalid svg format\\n' + e.message);\n  }\n\n  var svgWidth = result.width;\n  var svgHeight = result.height;\n  var viewBoxRect = result.viewBoxRect;\n\n  if (!boundingRect) {\n    boundingRect = svgWidth == null || svgHeight == null ? // If svg width / height not specified, calculate\n    // bounding rect as the width / height\n    root.getBoundingRect() : new BoundingRect(0, 0, 0, 0);\n\n    if (svgWidth != null) {\n      boundingRect.width = svgWidth;\n    }\n\n    if (svgHeight != null) {\n      boundingRect.height = svgHeight;\n    }\n  }\n\n  if (viewBoxRect) {\n    var viewBoxTransform = makeViewBoxTransform(viewBoxRect, boundingRect.width, boundingRect.height);\n    var elRoot = root;\n    root = new Group();\n    root.add(elRoot);\n    elRoot.scale = viewBoxTransform.scale;\n    elRoot.position = viewBoxTransform.position;\n  }\n\n  root.setClipPath(new Rect({\n    shape: boundingRect.plain()\n  }));\n  return {\n    root: root,\n    boundingRect: boundingRect\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/component/visualMap/VisualMapModel} visualMapModel\\\n * @param {module:echarts/ExtensionAPI} api\n * @param {Array.<number>} itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nfunction getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n\n\nfunction makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}\n\nexports.getItemAlign = getItemAlign;\nexports.makeHighDownBatch = makeHighDownBatch;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.center);\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendSymbol(which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/coord/View} view\n * @param {Object} payload\n * @param {Object} [zoomLimit]\n */\nfunction updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    var center = view.pointToData(point);\n    view.setCenter(center);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scale[0] *= zoom;\n    view.scale[1] *= zoom;\n    var position = view.position;\n    var fixX = (payload.originX - position[0]) * (zoom - 1);\n    var fixY = (payload.originY - position[1]) * (zoom - 1);\n    position[0] -= fixX;\n    position[1] -= fixY;\n    view.updateTransform(); // Get the new center\n\n    var center = view.pointToData(point);\n    view.setCenter(center);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\n\nexports.updateCenterAndZoom = updateCenterAndZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center' ¦ 'left' ¦ 'right' ¦ {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top' ¦ 'bottom' ¦ 'center' ¦ {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal' ¦ 'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // 值域边框颜色\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // 值域边框线宽，单位px，默认为0（无边框）\n    padding: 5,\n    // 值域内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    textGap: 10,\n    //\n    precision: 0,\n    // 小数精度，默认为0，无小数点\n    color: null,\n    //颜色（deprecated，兼容ec2，顺序同pieces，不同于inRange/outOfRange）\n    formatter: null,\n    text: null,\n    // 文本，如['高', '低']，兼容ec2，text[0]对应高值，text[1]对应低值\n    textStyle: {\n      color: '#333' // 值域文字颜色\n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    var listDimensions = list.dimensions;\n\n    if (optDim == null && !listDimensions.length) {\n      return;\n    }\n\n    if (optDim != null) {\n      return list.getDimension(optDim);\n    }\n\n    var dimNames = list.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = list.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimName;\n      }\n    }\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the defualt color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Geo = require(\"./Geo\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar geoSourceManager = require(\"./geoSourceManager\");\n\nvar mapDataStorage = require(\"./mapDataStorage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Resize method bound to the geo\n * @param {module:echarts/coord/geo/GeoModel|module:echarts/chart/map/MapModel} geoModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop = boundingCoords[0];\n    var rightBottom = boundingCoords[1];\n\n    if (isNaN(leftTop[0]) || isNaN(leftTop[1]) || isNaN(rightBottom[0]) || isNaN(rightBottom[1])) {} else {\n      this.setBoundingRect(leftTop[0], leftTop[1], rightBottom[0] - leftTop[0], rightBottom[1] - leftTop[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var boxLayoutOption;\n  var center = geoModel.get('layoutCenter');\n  var size = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n\n  if (center && size) {\n    center = [numberUtil.parsePercent(center[0], viewWidth), numberUtil.parsePercent(center[1], viewHeight)];\n    size = numberUtil.parsePercent(size, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {}\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    var viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    boxLayoutOption = geoModel.getBoxLayoutParams(); // 0.75 rate\n\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'));\n  this.setZoom(geoModel.get('zoom'));\n}\n/**\n * @param {module:echarts/coord/Geo} geo\n * @param {module:echarts/model/Model} model\n * @inner\n */\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar geoCreator = {\n  // For deciding which dimensions to use when creating list data\n  dimensions: Geo.prototype.dimensions,\n  create: function (ecModel, api) {\n    var geoList = []; // FIXME Create each time may be slow\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var name = geoModel.get('map');\n      var aspectScale = geoModel.get('aspectScale');\n      var invertLongitute = true;\n      var mapRecords = mapDataStorage.retrieveMap(name);\n\n      if (mapRecords && mapRecords[0] && mapRecords[0].type === 'svg') {\n        aspectScale == null && (aspectScale = 1);\n        invertLongitute = false;\n      } else {\n        aspectScale == null && (aspectScale = 0.75);\n      }\n\n      var geo = new Geo(name + idx, name, geoModel.get('nameMap'), invertLongitute);\n      geo.aspectScale = aspectScale;\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo);\n      setGeoCoords(geo, geoModel);\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, zrUtil.mergeAll(nameMapList));\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.aspectScale = mapSeries[0].get('aspectScale');\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  },\n\n  /**\n   * Fill given regions array\n   * @param  {Array.<Object>} originRegionArr\n   * @param  {string} mapName\n   * @param  {Object} [nameMap]\n   * @return {Array}\n   */\n  getFilledRegions: function (originRegionArr, mapName, nameMap) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    var source = geoSourceManager.load(mapName, nameMap);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      !dataNameMap.get(name) && regionsArr.push({\n        name: name\n      });\n    });\n    return regionsArr;\n  }\n};\necharts.registerCoordinateSystem('geo', geoCreator);\nvar _default = geoCreator;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param {number} delta Move length.\n * @param {Array.<number>} handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param {Array.<number>} extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param {number|string} handleIndex Can be 'all', means that both move the two handleEnds.\n * @param {number} [minSpan] The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param {number} [maxSpan] The range of dataZoom can not be larger than that.\n * @return {Array.<number>} The input handleEnds.\n */\nfunction _default(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME 公用？\n\n/**\n * @param {Array.<module:echarts/data/List>} datas\n * @param {string} statisticType 'average' 'sum'\n * @inner\n */\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nfunction _default(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}\n\nmodule.exports = _default;"],"sourceRoot":""}